{
   "object_type": "Acquisition",
   "describedBy": "https://raw.githubusercontent.com/AllenNeuralDynamics/aind-data-schema/main/src/aind_data_schema/core/acquisition.py",
   "schema_version": "2.1.0",
   "subject_id": "804434",
   "specimen_id": null,
   "acquisition_start_time": "2025-11-14T01:02:41.034814Z",
   "acquisition_end_time": "2025-11-14T01:38:26.044088Z",
   "experimenters": [
      "jason.lee"
   ],
   "protocol_id": null,
   "ethics_review_id": null,
   "instrument_id": "13A",
   "acquisition_type": "AindVrForaging",
   "notes": null,
   "coordinate_system": {
      "object_type": "Coordinate system",
      "name": "origin",
      "origin": "Bregma",
      "axes": [
         {
            "object_type": "Axis",
            "name": "X",
            "direction": "Left_to_right"
         },
         {
            "object_type": "Axis",
            "name": "Y",
            "direction": "Anterior_to_posterior"
         },
         {
            "object_type": "Axis",
            "name": "Z",
            "direction": "Inferior_to_superior"
         }
      ],
      "axis_unit": "millimeter"
   },
   "calibrations": [
      {
         "object_type": "Volume calibration",
         "device_name": "water_valve_solenoid",
         "calibration_date": "2025-05-23T00:00:00-07:00",
         "description": "Volume measured for various solenoid opening times",
         "measured_at": null,
         "input": [
            0.025,
            0.05,
            0.075,
            0.1,
            0.125,
            0.175,
            0.225
         ],
         "input_unit": "second",
         "repeats": null,
         "output": [
            0.00165,
            0.0033,
            0.0052,
            0.0066,
            0.00845,
            0.011850000000000001,
            0.01505
         ],
         "output_unit": "milliliter",
         "fit": {
            "object_type": "Calibration fit",
            "fit_type": "linear",
            "fit_parameters": {
               "interval_average": {
                  "0.025": 0.00165,
                  "0.05": 0.0033,
                  "0.075": 0.0052,
                  "0.1": 0.0066,
                  "0.125": 0.00845,
                  "0.175": 0.011850000000000001,
                  "0.225": 0.01505
               },
               "slope": 0.06720958083832337,
               "offset": 1.7964071856255842e-6,
               "r2": 0.9995552319468254,
               "valid_domain": [
                  0.025,
                  0.05,
                  0.075,
                  0.1,
                  0.125,
                  0.175,
                  0.225
               ]
            }
         },
         "notes": null
      }
   ],
   "maintenance": [],
   "data_streams": [
      {
         "object_type": "Data stream",
         "stream_start_time": "2025-11-14T01:02:41.034814Z",
         "stream_end_time": "2025-11-14T01:38:26.044023Z",
         "modalities": [
            {
               "name": "Behavior",
               "abbreviation": "behavior"
            },
            {
               "name": "Behavior videos",
               "abbreviation": "behavior-videos"
            }
         ],
         "code": [
            {
               "object_type": "Code",
               "url": "https://github.com/AllenNeuralDynamics/Aind.Experiment.VrForaging-Fip",
               "name": "Aind.Behavior.VrForaging",
               "version": "77925112b73f0b3939171a0de111ff2c89ddddc3",
               "container": null,
               "run_script": "C:\\git\\Aind.Experiment.VrForaging-Fip\\Aind.Behavior.VrForaging\\src\\main.bonsai",
               "language": "Bonsai",
               "language_version": "2.9.0",
               "input_data": null,
               "parameters": null,
               "core_dependency": null
            },
            {
               "object_type": "Code",
               "url": "https://github.com/AllenNeuralDynamics/Aind.Experiment.VrForaging-Fip",
               "name": "aind-behavior-vr-foraging",
               "version": "77925112b73f0b3939171a0de111ff2c89ddddc3",
               "container": null,
               "run_script": null,
               "language": "Python",
               "language_version": "3.13.1",
               "input_data": null,
               "parameters": null,
               "core_dependency": null
            }
         ],
         "notes": "",
         "active_devices": [
            "triggered_camera_controller",
            "FaceCamera",
            "SideCamera",
            "FrontCamera",
            "monitoring_camera_controller",
            "WebCam0",
            "harp_behavior",
            "harp_olfactometer",
            "harp_lickometer",
            "harp_clock_generator",
            "harp_treadmill",
            "harp_sniff_detector",
            "harp_environment_sensor",
            "manipulator",
            "screen"
         ],
         "configurations": [
            {
               "object_type": "Detector config",
               "device_name": "FaceCamera",
               "exposure_time": 1000.0,
               "exposure_time_unit": "microsecond",
               "trigger_type": "External",
               "compression": {
                  "object_type": "Code",
                  "url": "https://ffmpeg.org/",
                  "name": "FFMPEG",
                  "version": null,
                  "container": null,
                  "run_script": null,
                  "language": null,
                  "language_version": null,
                  "input_data": null,
                  "parameters": {
                     "video_writer_type": "FFMPEG",
                     "frame_rate": 240,
                     "container_extension": "mp4",
                     "output_arguments": "-vf \"scale=out_color_matrix=bt709:out_range=full,format=bgr24,scale=out_range=full\" -c:v h264_nvenc -pix_fmt yuv420p -color_range full -colorspace bt709 -color_trc linear -tune hq -preset p4 -rc vbr -cq 12 -b:v 0M -metadata author=\"Allen Institute for Neural Dynamics\" -maxrate 700M -bufsize 350M",
                     "input_arguments": "-colorspace bt709 -color_primaries bt709 -color_range full -color_trc linear"
                  },
                  "core_dependency": null
               }
            },
            {
               "object_type": "Detector config",
               "device_name": "SideCamera",
               "exposure_time": 1000.0,
               "exposure_time_unit": "microsecond",
               "trigger_type": "External",
               "compression": {
                  "object_type": "Code",
                  "url": "https://ffmpeg.org/",
                  "name": "FFMPEG",
                  "version": null,
                  "container": null,
                  "run_script": null,
                  "language": null,
                  "language_version": null,
                  "input_data": null,
                  "parameters": {
                     "video_writer_type": "FFMPEG",
                     "frame_rate": 240,
                     "container_extension": "mp4",
                     "output_arguments": "-vf \"scale=out_color_matrix=bt709:out_range=full,format=bgr24,scale=out_range=full\" -c:v h264_nvenc -pix_fmt yuv420p -color_range full -colorspace bt709 -color_trc linear -tune hq -preset p4 -rc vbr -cq 12 -b:v 0M -metadata author=\"Allen Institute for Neural Dynamics\" -maxrate 700M -bufsize 350M",
                     "input_arguments": "-colorspace bt709 -color_primaries bt709 -color_range full -color_trc linear"
                  },
                  "core_dependency": null
               }
            },
            {
               "object_type": "Detector config",
               "device_name": "FrontCamera",
               "exposure_time": 1000.0,
               "exposure_time_unit": "microsecond",
               "trigger_type": "External",
               "compression": {
                  "object_type": "Code",
                  "url": "https://ffmpeg.org/",
                  "name": "FFMPEG",
                  "version": null,
                  "container": null,
                  "run_script": null,
                  "language": null,
                  "language_version": null,
                  "input_data": null,
                  "parameters": {
                     "video_writer_type": "FFMPEG",
                     "frame_rate": 240,
                     "container_extension": "mp4",
                     "output_arguments": "-vf \"scale=out_color_matrix=bt709:out_range=full,format=bgr24,scale=out_range=full\" -c:v h264_nvenc -pix_fmt yuv420p -color_range full -colorspace bt709 -color_trc linear -tune hq -preset p4 -rc vbr -cq 12 -b:v 0M -metadata author=\"Allen Institute for Neural Dynamics\" -maxrate 700M -bufsize 350M",
                     "input_arguments": "-colorspace bt709 -color_primaries bt709 -color_range full -color_trc linear"
                  },
                  "core_dependency": null
               }
            }
         ],
         "connections": []
      }
   ],
   "stimulus_epochs": [
      {
         "object_type": "Stimulus epoch",
         "stimulus_start_time": "2025-11-14T01:02:41.034814Z",
         "stimulus_end_time": "2025-11-14T01:38:26.044023Z",
         "stimulus_name": "AindVrForaging",
         "code": {
            "object_type": "Code",
            "url": "https://github.com/AllenNeuralDynamics/Aind.Experiment.VrForaging-Fip",
            "name": "Aind.Behavior.VrForaging",
            "version": "77925112b73f0b3939171a0de111ff2c89ddddc3",
            "container": null,
            "run_script": "C:\\git\\Aind.Experiment.VrForaging-Fip\\Aind.Behavior.VrForaging\\src\\main.bonsai",
            "language": "Bonsai",
            "language_version": "2.9.0",
            "input_data": null,
            "parameters": {
               "task_logic": {
                  "name": "AindVrForaging",
                  "description": "",
                  "task_parameters": {
                     "rng_seed": null,
                     "aind_behavior_services_pkg_version": "0.12.4",
                     "updaters": {},
                     "environment": {
                        "blocks": [
                           {
                              "environment_statistics": {
                                 "patches": [
                                    {
                                       "label": "odor_0",
                                       "state_index": 0,
                                       "odor_specification": {
                                          "index": 0,
                                          "concentration": 1.0
                                       },
                                       "reward_specification": {
                                          "operant_logic": {
                                             "is_operant": false,
                                             "stop_duration": 0.5,
                                             "time_to_collect_reward": 100000.0,
                                             "grace_distance_threshold": 10.0
                                          },
                                          "delay": {
                                             "family": "Normal",
                                             "distribution_parameters": {
                                                "family": "Normal",
                                                "mean": 0.5,
                                                "std": 0.15
                                             },
                                             "truncation_parameters": {
                                                "truncation_mode": "exclude",
                                                "min": 0.0,
                                                "max": 1.0
                                             },
                                             "scaling_parameters": {
                                                "scale": 1.0,
                                                "offset": 0.0
                                             }
                                          },
                                          "amount": {
                                             "family": "Scalar",
                                             "distribution_parameters": {
                                                "family": "Scalar",
                                                "value": 5.0
                                             },
                                             "truncation_parameters": null,
                                             "scaling_parameters": null
                                          },
                                          "probability": {
                                             "family": "Scalar",
                                             "distribution_parameters": {
                                                "family": "Scalar",
                                                "value": 0.0
                                             },
                                             "truncation_parameters": null,
                                             "scaling_parameters": null
                                          },
                                          "available": {
                                             "family": "Scalar",
                                             "distribution_parameters": {
                                                "family": "Scalar",
                                                "value": 9999.0
                                             },
                                             "truncation_parameters": null,
                                             "scaling_parameters": null
                                          },
                                          "reward_function": [
                                             {
                                                "function_type": "OnThisPatchEntryRewardFunction",
                                                "amount": null,
                                                "probability": {
                                                   "function_type": "SetValueFunction",
                                                   "value": {
                                                      "family": "Scalar",
                                                      "distribution_parameters": {
                                                         "family": "Scalar",
                                                         "value": 0.0
                                                      },
                                                      "truncation_parameters": null,
                                                      "scaling_parameters": null
                                                   }
                                                },
                                                "available": null,
                                                "rule": "OnThisPatchEntry"
                                             },
                                             {
                                                "function_type": "PatchRewardFunction",
                                                "amount": null,
                                                "probability": {
                                                   "function_type": "ClampedMultiplicativeRateFunction",
                                                   "minimum": 0.0,
                                                   "maximum": 0.0,
                                                   "rate": {
                                                      "family": "Scalar",
                                                      "distribution_parameters": {
                                                         "family": "Scalar",
                                                         "value": 0.8795015081718721
                                                      },
                                                      "truncation_parameters": null,
                                                      "scaling_parameters": null
                                                   }
                                                },
                                                "available": null,
                                                "rule": "OnReward"
                                             }
                                          ]
                                       },
                                       "patch_virtual_sites_generator": {
                                          "inter_site": {
                                             "render_specification": {
                                                "contrast": 0.5
                                             },
                                             "label": "InterSite",
                                             "length_distribution": {
                                                "family": "Exponential",
                                                "distribution_parameters": {
                                                   "family": "Exponential",
                                                   "rate": 0.05
                                                },
                                                "truncation_parameters": {
                                                   "truncation_mode": "exclude",
                                                   "min": 20.0,
                                                   "max": 100.0
                                                },
                                                "scaling_parameters": null
                                             },
                                             "treadmill_specification": {
                                                "friction": {
                                                   "family": "Scalar",
                                                   "distribution_parameters": {
                                                      "family": "Scalar",
                                                      "value": 0.0
                                                   },
                                                   "truncation_parameters": null,
                                                   "scaling_parameters": null
                                                }
                                             }
                                          },
                                          "inter_patch": {
                                             "render_specification": {
                                                "contrast": 1.0
                                             },
                                             "label": "InterPatch",
                                             "length_distribution": {
                                                "family": "Exponential",
                                                "distribution_parameters": {
                                                   "family": "Exponential",
                                                   "rate": 0.01
                                                },
                                                "truncation_parameters": {
                                                   "truncation_mode": "exclude",
                                                   "min": 200.0,
                                                   "max": 600.0
                                                },
                                                "scaling_parameters": null
                                             },
                                             "treadmill_specification": {
                                                "friction": {
                                                   "family": "Scalar",
                                                   "distribution_parameters": {
                                                      "family": "Scalar",
                                                      "value": 0.0
                                                   },
                                                   "truncation_parameters": null,
                                                   "scaling_parameters": null
                                                }
                                             }
                                          },
                                          "post_patch": null,
                                          "reward_site": {
                                             "render_specification": {
                                                "contrast": 0.5
                                             },
                                             "label": "RewardSite",
                                             "length_distribution": {
                                                "family": "Scalar",
                                                "distribution_parameters": {
                                                   "family": "Scalar",
                                                   "value": 50.0
                                                },
                                                "truncation_parameters": null,
                                                "scaling_parameters": null
                                             },
                                             "treadmill_specification": {
                                                "friction": {
                                                   "family": "Scalar",
                                                   "distribution_parameters": {
                                                      "family": "Scalar",
                                                      "value": 0.0
                                                   },
                                                   "truncation_parameters": null,
                                                   "scaling_parameters": null
                                                }
                                             }
                                          }
                                       },
                                       "patch_terminators": [
                                          {
                                             "terminator_type": "OnRejection",
                                             "count": {
                                                "family": "Scalar",
                                                "distribution_parameters": {
                                                   "family": "Scalar",
                                                   "value": 1.0
                                                },
                                                "truncation_parameters": null,
                                                "scaling_parameters": null
                                             }
                                          }
                                       ]
                                    },
                                    {
                                       "label": "odor_90",
                                       "state_index": 1,
                                       "odor_specification": {
                                          "index": 1,
                                          "concentration": 1.0
                                       },
                                       "reward_specification": {
                                          "operant_logic": {
                                             "is_operant": false,
                                             "stop_duration": 0.5,
                                             "time_to_collect_reward": 100000.0,
                                             "grace_distance_threshold": 10.0
                                          },
                                          "delay": {
                                             "family": "Normal",
                                             "distribution_parameters": {
                                                "family": "Normal",
                                                "mean": 0.5,
                                                "std": 0.15
                                             },
                                             "truncation_parameters": {
                                                "truncation_mode": "exclude",
                                                "min": 0.0,
                                                "max": 1.0
                                             },
                                             "scaling_parameters": {
                                                "scale": 1.0,
                                                "offset": 0.0
                                             }
                                          },
                                          "amount": {
                                             "family": "Scalar",
                                             "distribution_parameters": {
                                                "family": "Scalar",
                                                "value": 5.0
                                             },
                                             "truncation_parameters": null,
                                             "scaling_parameters": null
                                          },
                                          "probability": {
                                             "family": "Scalar",
                                             "distribution_parameters": {
                                                "family": "Scalar",
                                                "value": 0.9
                                             },
                                             "truncation_parameters": null,
                                             "scaling_parameters": null
                                          },
                                          "available": {
                                             "family": "Scalar",
                                             "distribution_parameters": {
                                                "family": "Scalar",
                                                "value": 9999.0
                                             },
                                             "truncation_parameters": null,
                                             "scaling_parameters": null
                                          },
                                          "reward_function": [
                                             {
                                                "function_type": "OnThisPatchEntryRewardFunction",
                                                "amount": null,
                                                "probability": {
                                                   "function_type": "SetValueFunction",
                                                   "value": {
                                                      "family": "Scalar",
                                                      "distribution_parameters": {
                                                         "family": "Scalar",
                                                         "value": 0.9
                                                      },
                                                      "truncation_parameters": null,
                                                      "scaling_parameters": null
                                                   }
                                                },
                                                "available": null,
                                                "rule": "OnThisPatchEntry"
                                             },
                                             {
                                                "function_type": "PatchRewardFunction",
                                                "amount": null,
                                                "probability": {
                                                   "function_type": "ClampedMultiplicativeRateFunction",
                                                   "minimum": 0.0,
                                                   "maximum": 0.9,
                                                   "rate": {
                                                      "family": "Scalar",
                                                      "distribution_parameters": {
                                                         "family": "Scalar",
                                                         "value": 0.8795015081718721
                                                      },
                                                      "truncation_parameters": null,
                                                      "scaling_parameters": null
                                                   }
                                                },
                                                "available": null,
                                                "rule": "OnReward"
                                             }
                                          ]
                                       },
                                       "patch_virtual_sites_generator": {
                                          "inter_site": {
                                             "render_specification": {
                                                "contrast": 0.5
                                             },
                                             "label": "InterSite",
                                             "length_distribution": {
                                                "family": "Exponential",
                                                "distribution_parameters": {
                                                   "family": "Exponential",
                                                   "rate": 0.05
                                                },
                                                "truncation_parameters": {
                                                   "truncation_mode": "exclude",
                                                   "min": 20.0,
                                                   "max": 100.0
                                                },
                                                "scaling_parameters": null
                                             },
                                             "treadmill_specification": {
                                                "friction": {
                                                   "family": "Scalar",
                                                   "distribution_parameters": {
                                                      "family": "Scalar",
                                                      "value": 0.0
                                                   },
                                                   "truncation_parameters": null,
                                                   "scaling_parameters": null
                                                }
                                             }
                                          },
                                          "inter_patch": {
                                             "render_specification": {
                                                "contrast": 1.0
                                             },
                                             "label": "InterPatch",
                                             "length_distribution": {
                                                "family": "Exponential",
                                                "distribution_parameters": {
                                                   "family": "Exponential",
                                                   "rate": 0.01
                                                },
                                                "truncation_parameters": {
                                                   "truncation_mode": "exclude",
                                                   "min": 200.0,
                                                   "max": 600.0
                                                },
                                                "scaling_parameters": null
                                             },
                                             "treadmill_specification": {
                                                "friction": {
                                                   "family": "Scalar",
                                                   "distribution_parameters": {
                                                      "family": "Scalar",
                                                      "value": 0.0
                                                   },
                                                   "truncation_parameters": null,
                                                   "scaling_parameters": null
                                                }
                                             }
                                          },
                                          "post_patch": null,
                                          "reward_site": {
                                             "render_specification": {
                                                "contrast": 0.5
                                             },
                                             "label": "RewardSite",
                                             "length_distribution": {
                                                "family": "Scalar",
                                                "distribution_parameters": {
                                                   "family": "Scalar",
                                                   "value": 50.0
                                                },
                                                "truncation_parameters": null,
                                                "scaling_parameters": null
                                             },
                                             "treadmill_specification": {
                                                "friction": {
                                                   "family": "Scalar",
                                                   "distribution_parameters": {
                                                      "family": "Scalar",
                                                      "value": 0.0
                                                   },
                                                   "truncation_parameters": null,
                                                   "scaling_parameters": null
                                                }
                                             }
                                          }
                                       },
                                       "patch_terminators": [
                                          {
                                             "terminator_type": "OnRejection",
                                             "count": {
                                                "family": "Scalar",
                                                "distribution_parameters": {
                                                   "family": "Scalar",
                                                   "value": 1.0
                                                },
                                                "truncation_parameters": null,
                                                "scaling_parameters": null
                                             }
                                          }
                                       ]
                                    },
                                    {
                                       "label": "odor_60",
                                       "state_index": 2,
                                       "odor_specification": {
                                          "index": 2,
                                          "concentration": 1.0
                                       },
                                       "reward_specification": {
                                          "operant_logic": {
                                             "is_operant": false,
                                             "stop_duration": 0.5,
                                             "time_to_collect_reward": 100000.0,
                                             "grace_distance_threshold": 10.0
                                          },
                                          "delay": {
                                             "family": "Normal",
                                             "distribution_parameters": {
                                                "family": "Normal",
                                                "mean": 0.5,
                                                "std": 0.15
                                             },
                                             "truncation_parameters": {
                                                "truncation_mode": "exclude",
                                                "min": 0.0,
                                                "max": 1.0
                                             },
                                             "scaling_parameters": {
                                                "scale": 1.0,
                                                "offset": 0.0
                                             }
                                          },
                                          "amount": {
                                             "family": "Scalar",
                                             "distribution_parameters": {
                                                "family": "Scalar",
                                                "value": 5.0
                                             },
                                             "truncation_parameters": null,
                                             "scaling_parameters": null
                                          },
                                          "probability": {
                                             "family": "Scalar",
                                             "distribution_parameters": {
                                                "family": "Scalar",
                                                "value": 0.6
                                             },
                                             "truncation_parameters": null,
                                             "scaling_parameters": null
                                          },
                                          "available": {
                                             "family": "Scalar",
                                             "distribution_parameters": {
                                                "family": "Scalar",
                                                "value": 9999.0
                                             },
                                             "truncation_parameters": null,
                                             "scaling_parameters": null
                                          },
                                          "reward_function": [
                                             {
                                                "function_type": "OnThisPatchEntryRewardFunction",
                                                "amount": null,
                                                "probability": {
                                                   "function_type": "SetValueFunction",
                                                   "value": {
                                                      "family": "Scalar",
                                                      "distribution_parameters": {
                                                         "family": "Scalar",
                                                         "value": 0.6
                                                      },
                                                      "truncation_parameters": null,
                                                      "scaling_parameters": null
                                                   }
                                                },
                                                "available": null,
                                                "rule": "OnThisPatchEntry"
                                             },
                                             {
                                                "function_type": "PatchRewardFunction",
                                                "amount": null,
                                                "probability": {
                                                   "function_type": "ClampedMultiplicativeRateFunction",
                                                   "minimum": 0.0,
                                                   "maximum": 0.6,
                                                   "rate": {
                                                      "family": "Scalar",
                                                      "distribution_parameters": {
                                                         "family": "Scalar",
                                                         "value": 0.8795015081718721
                                                      },
                                                      "truncation_parameters": null,
                                                      "scaling_parameters": null
                                                   }
                                                },
                                                "available": null,
                                                "rule": "OnReward"
                                             }
                                          ]
                                       },
                                       "patch_virtual_sites_generator": {
                                          "inter_site": {
                                             "render_specification": {
                                                "contrast": 0.5
                                             },
                                             "label": "InterSite",
                                             "length_distribution": {
                                                "family": "Exponential",
                                                "distribution_parameters": {
                                                   "family": "Exponential",
                                                   "rate": 0.05
                                                },
                                                "truncation_parameters": {
                                                   "truncation_mode": "exclude",
                                                   "min": 20.0,
                                                   "max": 100.0
                                                },
                                                "scaling_parameters": null
                                             },
                                             "treadmill_specification": {
                                                "friction": {
                                                   "family": "Scalar",
                                                   "distribution_parameters": {
                                                      "family": "Scalar",
                                                      "value": 0.0
                                                   },
                                                   "truncation_parameters": null,
                                                   "scaling_parameters": null
                                                }
                                             }
                                          },
                                          "inter_patch": {
                                             "render_specification": {
                                                "contrast": 1.0
                                             },
                                             "label": "InterPatch",
                                             "length_distribution": {
                                                "family": "Exponential",
                                                "distribution_parameters": {
                                                   "family": "Exponential",
                                                   "rate": 0.01
                                                },
                                                "truncation_parameters": {
                                                   "truncation_mode": "exclude",
                                                   "min": 200.0,
                                                   "max": 600.0
                                                },
                                                "scaling_parameters": null
                                             },
                                             "treadmill_specification": {
                                                "friction": {
                                                   "family": "Scalar",
                                                   "distribution_parameters": {
                                                      "family": "Scalar",
                                                      "value": 0.0
                                                   },
                                                   "truncation_parameters": null,
                                                   "scaling_parameters": null
                                                }
                                             }
                                          },
                                          "post_patch": null,
                                          "reward_site": {
                                             "render_specification": {
                                                "contrast": 0.5
                                             },
                                             "label": "RewardSite",
                                             "length_distribution": {
                                                "family": "Scalar",
                                                "distribution_parameters": {
                                                   "family": "Scalar",
                                                   "value": 50.0
                                                },
                                                "truncation_parameters": null,
                                                "scaling_parameters": null
                                             },
                                             "treadmill_specification": {
                                                "friction": {
                                                   "family": "Scalar",
                                                   "distribution_parameters": {
                                                      "family": "Scalar",
                                                      "value": 0.0
                                                   },
                                                   "truncation_parameters": null,
                                                   "scaling_parameters": null
                                                }
                                             }
                                          }
                                       },
                                       "patch_terminators": [
                                          {
                                             "terminator_type": "OnRejection",
                                             "count": {
                                                "family": "Scalar",
                                                "distribution_parameters": {
                                                   "family": "Scalar",
                                                   "value": 1.0
                                                },
                                                "truncation_parameters": null,
                                                "scaling_parameters": null
                                             }
                                          }
                                       ]
                                    }
                                 ],
                                 "transition_matrix": [
                                    [
                                       0.1,
                                       0.45,
                                       0.45
                                    ],
                                    [
                                       0.1,
                                       0.45,
                                       0.45
                                    ],
                                    [
                                       0.1,
                                       0.45,
                                       0.45
                                    ]
                                 ],
                                 "first_state_occupancy": [
                                    0.1,
                                    0.45,
                                    0.45
                                 ]
                              },
                              "end_conditions": []
                           }
                        ],
                        "sampling_mode": "Sequential"
                     },
                     "operation_control": {
                        "movable_spout_control": {
                           "enabled": false,
                           "time_to_collect_after_reward": 99999.0,
                           "retracting_distance": 0.0
                        },
                        "odor_control": {
                           "valve_max_open_time": 10.0,
                           "target_total_flow": 1000.0,
                           "use_channel_3_as_carrier": true,
                           "target_odor_flow": 100.0
                        },
                        "position_control": {
                           "gain": {
                              "x": 1.0,
                              "y": 1.0,
                              "z": 1.0
                           },
                           "initial_position": {
                              "x": 0.0,
                              "y": 2.56,
                              "z": 0.0
                           },
                           "frequency_filter_cutoff": 5.0,
                           "velocity_threshold": 8.0
                        },
                        "audio_control": {
                           "duration": 0.2,
                           "frequency": 9999.0
                        }
                     }
                  },
                  "version": "0.6.2-rc1",
                  "stage_name": "graduation"
               },
               "rig": {
                  "aind_behavior_services_pkg_version": "0.12.4",
                  "version": "0.6.2-rc1",
                  "computer_name": "DT300043",
                  "rig_name": "13A",
                  "triggered_camera_controller": {
                     "device_type": "CameraController",
                     "name": "CameraController",
                     "additional_settings": null,
                     "calibration": null,
                     "cameras": {
                        "FaceCamera": {
                           "device_type": "SpinnakerCamera",
                           "name": "SpinnakerCamera",
                           "additional_settings": null,
                           "calibration": null,
                           "serial_number": "25092550",
                           "binning": 1,
                           "color_processing": "Default",
                           "exposure": 1000,
                           "gain": 3.0,
                           "gamma": null,
                           "adc_bit_depth": 0,
                           "pixel_format": 0,
                           "region_of_interest": {
                              "x": 0,
                              "y": 0,
                              "width": 720,
                              "height": 540
                           },
                           "video_writer": {
                              "video_writer_type": "FFMPEG",
                              "frame_rate": 240,
                              "container_extension": "mp4",
                              "output_arguments": "-vf \"scale=out_color_matrix=bt709:out_range=full,format=bgr24,scale=out_range=full\" -c:v h264_nvenc -pix_fmt yuv420p -color_range full -colorspace bt709 -color_trc linear -tune hq -preset p4 -rc vbr -cq 12 -b:v 0M -metadata author=\"Allen Institute for Neural Dynamics\" -maxrate 700M -bufsize 350M",
                              "input_arguments": "-colorspace bt709 -color_primaries bt709 -color_range full -color_trc linear"
                           }
                        },
                        "SideCamera": {
                           "device_type": "SpinnakerCamera",
                           "name": "SpinnakerCamera",
                           "additional_settings": null,
                           "calibration": null,
                           "serial_number": "24210999",
                           "binning": 1,
                           "color_processing": "Default",
                           "exposure": 1000,
                           "gain": 3.0,
                           "gamma": null,
                           "adc_bit_depth": 0,
                           "pixel_format": 0,
                           "region_of_interest": {
                              "x": 0,
                              "y": 0,
                              "width": 720,
                              "height": 540
                           },
                           "video_writer": {
                              "video_writer_type": "FFMPEG",
                              "frame_rate": 240,
                              "container_extension": "mp4",
                              "output_arguments": "-vf \"scale=out_color_matrix=bt709:out_range=full,format=bgr24,scale=out_range=full\" -c:v h264_nvenc -pix_fmt yuv420p -color_range full -colorspace bt709 -color_trc linear -tune hq -preset p4 -rc vbr -cq 12 -b:v 0M -metadata author=\"Allen Institute for Neural Dynamics\" -maxrate 700M -bufsize 350M",
                              "input_arguments": "-colorspace bt709 -color_primaries bt709 -color_range full -color_trc linear"
                           }
                        },
                        "FrontCamera": {
                           "device_type": "SpinnakerCamera",
                           "name": "SpinnakerCamera",
                           "additional_settings": null,
                           "calibration": null,
                           "serial_number": "25092542",
                           "binning": 1,
                           "color_processing": "Default",
                           "exposure": 1000,
                           "gain": 0.0,
                           "gamma": null,
                           "adc_bit_depth": 0,
                           "pixel_format": 0,
                           "region_of_interest": {
                              "x": 0,
                              "y": 0,
                              "width": 720,
                              "height": 540
                           },
                           "video_writer": {
                              "video_writer_type": "FFMPEG",
                              "frame_rate": 240,
                              "container_extension": "mp4",
                              "output_arguments": "-vf \"scale=out_color_matrix=bt709:out_range=full,format=bgr24,scale=out_range=full\" -c:v h264_nvenc -pix_fmt yuv420p -color_range full -colorspace bt709 -color_trc linear -tune hq -preset p4 -rc vbr -cq 12 -b:v 0M -metadata author=\"Allen Institute for Neural Dynamics\" -maxrate 700M -bufsize 350M",
                              "input_arguments": "-colorspace bt709 -color_primaries bt709 -color_range full -color_trc linear"
                           }
                        }
                     },
                     "frame_rate": 240
                  },
                  "monitoring_camera_controller": {
                     "device_type": "CameraController",
                     "name": "CameraController",
                     "additional_settings": null,
                     "calibration": null,
                     "cameras": {
                        "WebCam0": {
                           "device_type": "WebCamera",
                           "name": "WebCamera",
                           "additional_settings": null,
                           "calibration": null,
                           "index": 0,
                           "video_writer": null
                        }
                     },
                     "frame_rate": 30
                  },
                  "harp_behavior": {
                     "device_type": "Behavior",
                     "name": "Behavior",
                     "additional_settings": null,
                     "calibration": null,
                     "who_am_i": 1216,
                     "serial_number": null,
                     "port_name": "COM7"
                  },
                  "harp_olfactometer": {
                     "device_type": "Olfactometer",
                     "name": "Olfactometer",
                     "additional_settings": null,
                     "calibration": {
                        "device_name": "Olfactometer",
                        "input": {
                           "channel_config": {
                              "0": {
                                 "channel_index": 0,
                                 "channel_type": "Odor",
                                 "flow_rate_capacity": 100,
                                 "flow_rate": 100.0,
                                 "odorant": "Methyl Butyrate",
                                 "odorant_dilution": 10.0
                              },
                              "1": {
                                 "channel_index": 1,
                                 "channel_type": "Odor",
                                 "flow_rate_capacity": 100,
                                 "flow_rate": 100.0,
                                 "odorant": "Alpha-pinene",
                                 "odorant_dilution": 10.0
                              },
                              "2": {
                                 "channel_index": 2,
                                 "channel_type": "Odor",
                                 "flow_rate_capacity": 100,
                                 "flow_rate": 100.0,
                                 "odorant": "Fenchone",
                                 "odorant_dilution": 10.0
                              },
                              "3": {
                                 "channel_index": 3,
                                 "channel_type": "Carrier",
                                 "flow_rate_capacity": 1000,
                                 "flow_rate": 100.0,
                                 "odorant": null,
                                 "odorant_dilution": null
                              }
                           }
                        },
                        "output": {},
                        "date": "2025-06-02T11:21:44.288794",
                        "description": "Calibration of the harp olfactometer device",
                        "notes": null
                     },
                     "who_am_i": 1140,
                     "serial_number": null,
                     "port_name": "COM16"
                  },
                  "harp_lickometer": {
                     "device_type": "LicketySplit",
                     "name": "LicketySplit",
                     "additional_settings": null,
                     "calibration": null,
                     "who_am_i": 1400,
                     "serial_number": null,
                     "port_name": "COM11"
                  },
                  "harp_clock_generator": {
                     "device_type": "WhiteRabbit",
                     "name": "WhiteRabbit",
                     "additional_settings": null,
                     "calibration": null,
                     "who_am_i": 1404,
                     "serial_number": null,
                     "port_name": "COM10",
                     "connected_clock_outputs": [
                        {
                           "target_device": "HarpBehavior",
                           "output_channel": 0
                        },
                        {
                           "target_device": "HarpOlfactometer",
                           "output_channel": 1
                        },
                        {
                           "target_device": "AindManipulatorDevice",
                           "output_channel": 2
                        },
                        {
                           "target_device": "HarpTreadmill",
                           "output_channel": 3
                        },
                        {
                           "target_device": "HarpSniffDetector",
                           "output_channel": 4
                        },
                        {
                           "target_device": "HarpLicketySplit",
                           "output_channel": 5
                        },
                        {
                           "target_device": "HarpEnvironmentSensor",
                           "output_channel": 6
                        }
                     ]
                  },
                  "harp_analog_input": null,
                  "harp_treadmill": {
                     "device_type": "Treadmill",
                     "name": "Treadmill",
                     "additional_settings": null,
                     "calibration": {
                        "device_name": "Treadmill",
                        "input": {},
                        "output": {
                           "wheel_diameter": 15.0,
                           "pulses_per_revolution": 8192,
                           "invert_direction": false,
                           "brake_lookup_calibration": [
                              [
                                 0.0,
                                 0.0
                              ],
                              [
                                 1.0,
                                 65535.0
                              ]
                           ]
                        },
                        "date": null,
                        "description": "Calibration of the treadmill system",
                        "notes": null
                     },
                     "who_am_i": 1402,
                     "serial_number": null,
                     "port_name": "COM4"
                  },
                  "harp_sniff_detector": {
                     "device_type": "SniffDetector",
                     "name": "SniffDetector",
                     "additional_settings": null,
                     "calibration": null,
                     "who_am_i": 1401,
                     "serial_number": null,
                     "port_name": "COM9"
                  },
                  "harp_environment_sensor": {
                     "device_type": "EnvironmentSensor",
                     "name": "EnvironmentSensor",
                     "additional_settings": null,
                     "calibration": null,
                     "who_am_i": 1405,
                     "serial_number": null,
                     "port_name": "COM3"
                  },
                  "manipulator": {
                     "device_type": "StepperDriver",
                     "name": "AindManipulator",
                     "additional_settings": {
                        "spout_axis": 2
                     },
                     "calibration": {
                        "device_name": "AindManipulator",
                        "input": {
                           "full_step_to_mm": {
                              "x": 0.01,
                              "y1": 0.01,
                              "y2": 0.01,
                              "z": 0.01
                           },
                           "axis_configuration": [
                              {
                                 "axis": 2,
                                 "step_acceleration_interval": 100,
                                 "step_interval": 100,
                                 "microstep_resolution": 0,
                                 "maximum_step_interval": 2000,
                                 "motor_operation_mode": 0,
                                 "max_limit": 30.0,
                                 "min_limit": -0.01
                              },
                              {
                                 "axis": 3,
                                 "step_acceleration_interval": 100,
                                 "step_interval": 100,
                                 "microstep_resolution": 0,
                                 "maximum_step_interval": 2000,
                                 "motor_operation_mode": 0,
                                 "max_limit": 30.0,
                                 "min_limit": -0.01
                              },
                              {
                                 "axis": 1,
                                 "step_acceleration_interval": 100,
                                 "step_interval": 100,
                                 "microstep_resolution": 0,
                                 "maximum_step_interval": 2000,
                                 "motor_operation_mode": 0,
                                 "max_limit": 30.0,
                                 "min_limit": -0.01
                              },
                              {
                                 "axis": 4,
                                 "step_acceleration_interval": 100,
                                 "step_interval": 100,
                                 "microstep_resolution": 0,
                                 "maximum_step_interval": 2000,
                                 "motor_operation_mode": 0,
                                 "max_limit": 30.0,
                                 "min_limit": -0.01
                              }
                           ],
                           "homing_order": [
                              2,
                              3,
                              1,
                              4
                           ],
                           "initial_position": {
                              "x": 15.0,
                              "y1": 13.5375,
                              "y2": 12.55,
                              "z": 6.0
                           }
                        },
                        "output": {},
                        "date": null,
                        "description": "Calibration of the load cells system",
                        "notes": null
                     },
                     "who_am_i": 1130,
                     "serial_number": null,
                     "port_name": "COM12"
                  },
                  "screen": {
                     "device_type": "Screen",
                     "name": "Screen",
                     "additional_settings": null,
                     "calibration": {
                        "left": {
                           "intrinsics": {
                              "frame_width": 1920,
                              "frame_height": 1080,
                              "display_width": 20.0,
                              "display_height": 15.0
                           },
                           "extrinsics": {
                              "rotation": {
                                 "x": 0.0,
                                 "y": 1.0472,
                                 "z": 0.0
                              },
                              "translation": {
                                 "x": -16.6917756,
                                 "y": 1.309016,
                                 "z": -3.575264
                              }
                           }
                        },
                        "center": {
                           "intrinsics": {
                              "frame_width": 1920,
                              "frame_height": 1080,
                              "display_width": 20.0,
                              "display_height": 15.0
                           },
                           "extrinsics": {
                              "rotation": {
                                 "x": 0.0,
                                 "y": 0.0,
                                 "z": 0.0
                              },
                              "translation": {
                                 "x": 0.0,
                                 "y": 1.309016,
                                 "z": -13.27
                              }
                           }
                        },
                        "right": {
                           "intrinsics": {
                              "frame_width": 1920,
                              "frame_height": 1080,
                              "display_width": 20.0,
                              "display_height": 15.0
                           },
                           "extrinsics": {
                              "rotation": {
                                 "x": 0.0,
                                 "y": -1.0472,
                                 "z": 0.0
                              },
                              "translation": {
                                 "x": 16.6917756,
                                 "y": 1.309016,
                                 "z": -3.575264
                              }
                           }
                        }
                     },
                     "display_index": 1,
                     "target_render_frequency": 60.0,
                     "target_update_frequency": 120.0,
                     "texture_assets_directory": "Textures",
                     "brightness": 0.0,
                     "contrast": 1.0
                  },
                  "calibration": {
                     "water_valve": {
                        "device_name": "WaterValve",
                        "input": {
                           "measurements": [
                              {
                                 "valve_open_interval": 0.5,
                                 "valve_open_time": 0.025,
                                 "water_weight": [
                                    0.33
                                 ],
                                 "repeat_count": 200
                              },
                              {
                                 "valve_open_interval": 0.5,
                                 "valve_open_time": 0.05,
                                 "water_weight": [
                                    0.66
                                 ],
                                 "repeat_count": 200
                              },
                              {
                                 "valve_open_interval": 0.5,
                                 "valve_open_time": 0.075,
                                 "water_weight": [
                                    1.04
                                 ],
                                 "repeat_count": 200
                              },
                              {
                                 "valve_open_interval": 0.5,
                                 "valve_open_time": 0.1,
                                 "water_weight": [
                                    1.32
                                 ],
                                 "repeat_count": 200
                              },
                              {
                                 "valve_open_interval": 0.5,
                                 "valve_open_time": 0.125,
                                 "water_weight": [
                                    1.69
                                 ],
                                 "repeat_count": 200
                              },
                              {
                                 "valve_open_interval": 0.5,
                                 "valve_open_time": 0.175,
                                 "water_weight": [
                                    2.37
                                 ],
                                 "repeat_count": 200
                              },
                              {
                                 "valve_open_interval": 0.5,
                                 "valve_open_time": 0.225,
                                 "water_weight": [
                                    3.01
                                 ],
                                 "repeat_count": 200
                              }
                           ]
                        },
                        "output": {
                           "interval_average": {
                              "0.025": 0.00165,
                              "0.05": 0.0033,
                              "0.075": 0.0052,
                              "0.1": 0.0066,
                              "0.125": 0.00845,
                              "0.175": 0.011850000000000001,
                              "0.225": 0.01505
                           },
                           "slope": 0.06720958083832337,
                           "offset": 1.7964071856255842e-6,
                           "r2": 0.9995552319468254,
                           "valid_domain": [
                              0.025,
                              0.05,
                              0.075,
                              0.1,
                              0.125,
                              0.175,
                              0.225
                           ]
                        },
                        "date": "2025-05-23T00:00:00",
                        "description": "Calibration of the water valve delivery system",
                        "notes": null
                     }
                  }
               },
               "session": {
                  "aind_behavior_services_pkg_version": "0.12.4",
                  "version": "0.12.4",
                  "experiment": null,
                  "experimenter": [
                     "jason.lee"
                  ],
                  "date": "2025-11-14T01:02:41.034814Z",
                  "root_path": "C:\\Data\\804434",
                  "session_name": "804434_2025-11-14T010241Z",
                  "subject": "804434",
                  "experiment_version": "",
                  "notes": "",
                  "commit_hash": "77925112b73f0b3939171a0de111ff2c89ddddc3",
                  "allow_dirty_repo": true,
                  "skip_hardware_validation": false
               }
            },
            "core_dependency": null
         },
         "stimulus_modalities": [
            "Auditory",
            "Visual",
            "Virtual reality",
            "Wheel friction"
         ],
         "performance_metrics": {
            "object_type": "Performance metrics",
            "output_parameters": {
               "total_water_consumed": 680.0,
               "n_reward_sites_travelled": 284,
               "n_choices": 230,
               "n_patches_visited": 47,
               "n_patches_visited_per_patch": {
                  "1": 27,
                  "2": 20
               },
               "last_stop_duration": 0.5,
               "last_reward_site_length": 50.0,
               "last_delay_duration": 0.0
            },
            "reward_consumed_during_epoch": null,
            "reward_consumed_unit": null,
            "trials_total": null,
            "trials_finished": null,
            "trials_rewarded": null
         },
         "notes": null,
         "active_devices": [
            "speaker"
         ],
         "configurations": [
            {
               "object_type": "Speaker config",
               "device_name": "speaker",
               "volume": 60.0,
               "volume_unit": "decibels"
            },
            {
               "object_type": "Mouse platform config",
               "device_name": "wheel",
               "objects_in_arena": null,
               "active_control": true
            }
         ],
         "training_protocol_name": null,
         "curriculum_status": "True"
      }
   ],
   "subject_details": {
      "object_type": "Acquisition subject details",
      "animal_weight_prior": null,
      "animal_weight_post": null,
      "weight_unit": "gram",
      "anaesthesia": null,
      "mouse_platform_name": "wheel",
      "reward_consumed_total": null,
      "reward_consumed_unit": null
   }
}
